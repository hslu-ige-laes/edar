# R Basics
## Packages
### Install from CRAN
- Close all projects in R Studio
- `install.packages("ggplot2")`

### Install from github
```r
install.packages("devtools")
library(devtools)
install_github("retomarek/redutils")
```

<br>

### Loading
- `library(ggplot2)`

<br>

## Importing data
### csv file
```r
df <- read.csv("datafile.csv")
df <- read.csv("datafile.csv", header=FALSE, stringsAsFactors=FALSE)
```
```{r rbasics readcsv}
df <- read.csv("https://github.com/retomarek/r/raw/master/datasets/buildingMonitoringTestDataSet.csv", stringsAsFactors=FALSE, sep ="," )
```
Attention: By default, strings in the data are treated as factors. 
read.csv() is a convenience wrapper function around read.table(). If you need more control over the input, see ?read.table

<br>

### Excel File
```r
# Only need to install once
install.packages("xlsx")

library(xslx)

df <- read.xlsx("datafile.xlsx", 1)
df <- read.xlsx("datafile.xls", sheetIndex=2)
df <- read.xlsx("datafile.xls", sheetName="Revenues")
```

For reading older Excel files in the .xls format, the gdata package has the function read.xls():
```r
# Only need to install once
install.packages("gdata")

library(gdata)
# Read first sheet
df <- read.xls("datafile.xls")
df <- read.xls("datafile.xls", sheet=2)
```

Both the xlsx and gdata packages require other software to be installed on your computer. For xlsx, you need to install Java on your machine. For gdata, you need Perl, which comes as standard on Linux and Mac OS X, but not Windows. On Windows, youâ€™ll need ActiveState Perl. The Community Edition can be obtained for free.

<br>

## Data manipulations
### data frames
#### change row names of df
```r
names(df) <- c("Column1","Column2","Column3")
```

### wide to long

```{r rbasics wide2long}
# wide format
head(df)

# convert wide to long format
df.long <- as.data.frame(tidyr::pivot_longer(df,
                                      cols = -time,
                                      names_to = "name",
                                      values_to = "value",
                                      values_drop_na = TRUE)
                         )

# long format
head(df.long)
```

### long to wide
```{r rbasics long2wide}
# long format
head(df.long)

# convert long table into wide table
df.wide <- as.data.frame(tidyr::pivot_wider(df.long,
                                     names_from = "name",
                                     values_from = "value")
                         )

# wide format
head(df.wide)
```
